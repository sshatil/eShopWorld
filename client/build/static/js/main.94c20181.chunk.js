(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(23),r=c.n(a),i=c(5),o=c(7),l=c.n(o),j=c(12),u=c(4),d=c(15),b=c.n(d),O=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],a=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/products");case 2:t=e.sent,s(t.data.products);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a()}),[]),{products:[c,s]}},h=c(21),p=c(48),x=function(e){var t=Object(n.useState)(!1),c=Object(u.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(!1),i=Object(u.a)(r,2),o=i[0],d=i[1],O=Object(n.useState)([]),x=Object(u.a)(O,2),m=x[0],f=x[1];console.log(m),Object(n.useEffect)((function(){e&&function(){var t=Object(j.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/user/infor",{headers:{Authorization:e}});case 3:c=t.sent,a(!0),1===c.data.role?d(!0):d(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var g=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",alert("Please login for buying"));case 2:m.every((function(e){return e._id!==t._id}))?f([].concat(Object(p.a)(m),[Object(h.a)(Object(h.a)({},t),{},{quantity:1})])):alert("This product has been added to cart");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{isLoggedIn:[s,a],isAdmin:[o,d],cart:[m,f],addCart:g}},m=c(1),f=Object(n.createContext)(),g=function(e){var t=e.children,c=Object(n.useState)(!1),s=Object(u.a)(c,2),a=s[0],r=s[1],i=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/refresh_token");case 2:t=e.sent,r(t.data.accesstoken);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){localStorage.getItem("firstLogin")&&i()}),[]);var o={token:[a,r],ProductsAPI:O(),userApi:x(a)};return Object(m.jsx)(f.Provider,{value:o,children:t})},v=(c(76),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],s=t[1],a=function(){s(!1)},r=Object(n.useContext)(f),o=Object(u.a)(r.userApi.isLoggedIn,2),d=o[0],O=o[1],h=Object(u.a)(r.userApi.isAdmin,2),p=h[0],x=h[1],g=Object(u.a)(r.userApi.cart,1)[0];console.log(r);var v=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/logout");case 2:localStorage.clear(),x(!1),O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(g);return Object(m.jsxs)("nav",{className:"navbar",children:[Object(m.jsx)(i.b,{to:"/",className:"navbar-logo",children:p?"Admin":"Logo"}),p&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/createProducts",children:"Create Product"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/category",children:"Categories"})})]}),Object(m.jsx)("div",{className:"menu-icon",onClick:function(){s(!c)},children:Object(m.jsx)("i",{className:c?"fa fa-times":"fa fa-bars"})}),Object(m.jsxs)("ul",{className:c?"nav-menu active":"nav-menu",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/",className:"nav-links",onClick:a,children:"Home"})}),d&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/history",className:"nav-links",onClick:a,children:"History"})})}),d?Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/",className:"nav-links",onClick:v,children:"Logout"})}):Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/sign-up",className:"nav-links",onClick:a,children:"Sign Up"})}),p?"":Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsxs)(i.b,{to:"/cart",className:"nav-links",onClick:a,children:["Cart ",Object(m.jsx)("span",{children:g.length})]})})]})]})}),N=c(6),_=(c(82),function(){var e=Object(n.useState)({email:"",password:""}),t=Object(u.a)(e,2),c=t[0],s=t[1],a=function(e){var t=Object(h.a)({},c);t[e.target.name]=e.target.value,s(t)},r=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/login",Object(h.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return console.log(c),Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("form",{onSubmit:r,children:[Object(m.jsx)("input",{className:"login__input",type:"email",name:"email",placeholder:"Email",onChange:a}),Object(m.jsx)("input",{className:"login__input",type:"password",name:"password",placeholder:"Your Password",onChange:a}),Object(m.jsxs)("div",{className:"login__btn",children:[Object(m.jsx)("button",{className:"login__input",type:"submit",children:"Login"}),Object(m.jsx)(i.b,{className:"register-link",to:"/register",children:"Register"})]})]})]})}),k=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(u.a)(e,2),c=t[0],s=t[1],a=function(e){var t=Object(h.a)({},c);t[e.target.name]=e.target.value,s(t)},r=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/register",Object(h.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return console.log(c),Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h2",{children:"Register"}),Object(m.jsxs)("form",{onSubmit:r,children:[Object(m.jsx)("input",{className:"login__input",type:"text",name:"name",placeholder:"Your Name",onChange:a}),Object(m.jsx)("input",{className:"login__input",type:"email",name:"email",placeholder:"Email",onChange:a}),Object(m.jsx)("input",{className:"login__input",type:"password",name:"password",placeholder:"Your Password",onChange:a}),Object(m.jsxs)("div",{className:"login__btn",children:[Object(m.jsx)("button",{className:"login__input",type:"submit",children:"Register"}),Object(m.jsx)(i.b,{className:"register-link",to:"/login",children:"Login"})]})]})]})},w=c(103),y=c(105),C=function(){var e=Object(n.useContext)(f),t=Object(u.a)(e.userApi.cart,1)[0];return console.log(t),Object(m.jsxs)("div",{children:[0===t.length&&Object(m.jsx)("h1",{style:{color:"white"},children:"No order found"}),t.map((function(e){return Object(m.jsxs)(w.a,{container:!0,className:"product-details",children:[Object(m.jsx)(w.a,{item:!0,xs:12,sm:6,className:"product-details__img",children:Object(m.jsx)("img",{src:e.images.url,alt:""})}),Object(m.jsxs)(w.a,{item:!0,xs:12,sm:6,className:"box-details",children:[Object(m.jsxs)("div",{className:"box-details__title",children:[Object(m.jsx)("h2",{children:e.title}),Object(m.jsxs)("span",{children:[Object(m.jsxs)("strong",{children:["$ ",e.price]})," "]})]}),Object(m.jsx)("p",{children:e.description}),Object(m.jsx)("p",{children:e.content}),Object(m.jsxs)("p",{children:["Sold ",e.sold]}),Object(m.jsx)(i.b,{to:"/cart",children:Object(m.jsx)(y.a,{variant:"contained",color:"primary",children:"Buy Now"})})]})]},e._id)}))]})},S=(c(83),c(84),function(e){var t=e.product,c=e.isAdmin,s=Object(n.useContext)(f),a=t.title,r=t.description,o=t.price,l=t._id,j=t.checked,u=s.userApi.addCart;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"product-item",children:[c&&Object(m.jsx)("input",{type:"checkbox",checked:j}),Object(m.jsx)("img",{src:t.images.url,alt:""}),Object(m.jsxs)("div",{className:"product-item__header",children:[Object(m.jsx)("h3",{children:a}),Object(m.jsx)("h5",{children:"id"})]}),Object(m.jsxs)("p",{children:["Price: $",Object(m.jsx)("strong",{children:o})]}),Object(m.jsx)("p",{children:r}),Object(m.jsx)("div",{className:"product-item__btn",children:c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.b,{className:"btn",to:"/",children:"Delete"}),Object(m.jsx)(i.b,{className:"btn",to:"/edit_product/".concat(l),children:"Edit"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.b,{className:"btn",to:"/",onClick:function(){return u(t)},children:"Buy"}),Object(m.jsx)(i.b,{className:"btn",to:"/details/".concat(l),children:"View"})]})})]})})}),A=function(){var e=Object(N.f)(),t=Object(n.useContext)(f),c=Object(u.a)(t.ProductsAPI.products,1)[0],s=Object(n.useState)([]),a=Object(u.a)(s,2),r=a[0],o=a[1];Object(n.useEffect)((function(){c.forEach((function(t){t._id===e.id&&o(t)}))}),[e.id,c]),console.log(r);var l=r.title,j=r.price,d=r.description,b=r.content,O=r.sold;return 0===r.length?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(w.a,{container:!0,className:"product-details",children:[Object(m.jsx)(w.a,{item:!0,xs:12,sm:6,className:"product-details__img",children:Object(m.jsx)("img",{src:r.images.url,alt:""})}),Object(m.jsxs)(w.a,{item:!0,xs:12,sm:6,className:"box-details",children:[Object(m.jsxs)("div",{className:"box-details__title",children:[Object(m.jsx)("h2",{children:l}),Object(m.jsxs)("span",{children:[Object(m.jsxs)("strong",{children:["$ ",j]})," "]})]}),Object(m.jsx)("p",{children:d}),Object(m.jsx)("p",{children:b}),Object(m.jsxs)("p",{children:["Sold ",O]}),Object(m.jsx)(i.b,{to:"/cart",children:Object(m.jsx)(y.a,{variant:"contained",color:"primary",children:"Buy Now"})})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"related__product",children:"Related Products"}),Object(m.jsx)("div",{className:"products",children:c.map((function(e){return e.category===r.category?Object(m.jsx)(S,{product:e},e._id):null}))})]})]})},P=c(104),L=(c(85),function(){var e=Object(n.useContext)(f),t=Object(u.a)(e.ProductsAPI.products,1)[0],c=Object(u.a)(e.userApi.isAdmin,1)[0];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"products",children:t.map((function(e){return Object(m.jsx)(S,{product:e,isAdmin:c},e._id)}))}),0===t.length&&Object(m.jsx)(P.a,{})]})}),F=function(){return Object(m.jsx)("div",{children:"sorry not found"})},I=(c(86),function(){return Object(m.jsx)("div",{className:"home",children:Object(m.jsxs)(N.c,{children:[Object(m.jsx)(N.a,{path:"/",exact:!0,component:L}),Object(m.jsx)(N.a,{path:"/details/:id",exact:!0,component:A}),Object(m.jsx)(N.a,{path:"/login",exact:!0,component:_}),Object(m.jsx)(N.a,{path:"/register",exact:!0,component:k}),Object(m.jsx)(N.a,{path:"/cart",exact:!0,component:C}),Object(m.jsx)(N.a,{path:"*",exact:!0,component:F})]})})});c(87);var E=function(){return Object(m.jsx)(g,{children:Object(m.jsx)(i.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(v,{}),Object(m.jsx)(I,{})]})})})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,106)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};c(88);r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(E,{})}),document.getElementById("root")),B()}},[[89,1,2]]]);
//# sourceMappingURL=main.94c20181.chunk.js.map